<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <title>Lockument - íŒŒì¼ ì•”í˜¸í™” / ë³µí˜¸í™”</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Cache-Control" content="no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <style>
    :root{
      --bg:#f8fafc; --card:#ffffff; --border:#e2e8f0;
      --text:#0f172a; --muted:#64748b; --accent:#3b82f6; --accent-2:#2563eb;
      --success:#10b981; --danger:#ef4444; --warning:#f59e0b;
      --radius:16px; --shadow:0 4px 20px rgba(0,0,0,.08);
      --gradient:linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      color:var(--text);
      background:var(--bg);
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Pretendard,"Apple SD Gothic Neo","Malgun Gothic",sans-serif;
    }
    
    /* ë„¤ë¹„ê²Œì´ì…˜ */
    nav{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:16px 24px;
      background:#ffffff;
      border-bottom:1px solid var(--border);
      box-shadow:0 1px 3px rgba(0,0,0,.05);
      position:sticky;
      top:0;
      z-index:100;
    }
    nav .left{
      font-weight:800;
      font-size:22px;
      letter-spacing:-.3px;
      background:var(--gradient);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      background-clip:text;
    }
    nav .right{
      display:flex;
      align-items:center;
      gap:16px;
      font-size:14px;
    }
    nav .right a, nav .right button{
      color:var(--text);
      background:none;
      border:none;
      cursor:pointer;
      font-weight:600;
      text-decoration:none;
      transition:.2s;
      padding:8px 12px;
      border-radius:8px;
    }
    nav .right a:hover, nav .right button:hover{
      background:#f1f5f9;
    }
    nav .right .btn-log {
      background:var(--gradient);
      color:#fff !important;
      padding:8px 16px;
      border-radius:8px;
      font-weight:700;
      box-shadow:0 2px 8px rgba(102,126,234,.3);
    }
    nav .right .btn-log:hover { 
      transform:translateY(-1px);
      box-shadow:0 4px 12px rgba(102,126,234,.4);
    }
    #session-timer{
      background:#fef3c7;
      color:#92400e;
      padding:6px 12px;
      border-radius:8px;
      font-weight:700;
      font-size:13px;
    }
    
    /* ë©”ì¸ ì»¨í…Œì´ë„ˆ */
    .wrap{
      max-width:1100px;
      margin:40px auto;
      padding:0 24px;
    }
    .headline{
      font-size:36px;
      font-weight:800;
      margin:0 0 10px;
      background:var(--gradient);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      background-clip:text;
    }
    .sub{
      color:var(--muted);
      margin:0 0 32px;
      font-size:16px;
    }
    
    /* íƒ­ */
    .tabs{
      display:flex;
      gap:12px;
      margin-bottom:24px;
    }
    .tab-btn{
      background:#fff;
      color:var(--muted);
      border:2px solid var(--border);
      padding:12px 24px;
      border-radius:12px;
      cursor:pointer;
      transition:.2s;
      font-weight:700;
      font-size:15px;
    }
    .tab-btn:hover{
      border-color:var(--accent);
      color:var(--accent);
    }
    .tab-btn.active{
      background:var(--gradient);
      color:#fff;
      border-color:transparent;
      box-shadow:0 4px 12px rgba(102,126,234,.3);
    }
    
    /* ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ */
    .grid{
      display:grid;
      grid-template-columns:1.2fr .8fr;
      gap:24px;
    }
    @media(max-width:900px){
      .grid{grid-template-columns:1fr}
      .headline{font-size:28px}
    }
    
    /* ì¹´ë“œ */
    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:28px;
    }
    .section-title{
      font-weight:800;
      font-size:20px;
      margin:0 0 16px;
      color:var(--text);
    }
    .muted{
      color:var(--muted);
      font-size:14px;
    }
    
    /* ë²„íŠ¼ */
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      background:var(--gradient);
      color:#fff;
      border:none;
      border-radius:10px;
      padding:12px 20px;
      cursor:pointer;
      font-weight:700;
      font-size:15px;
      transition:.2s;
      box-shadow:0 2px 8px rgba(102,126,234,.3);
    }
    .btn:hover{
      transform:translateY(-2px);
      box-shadow:0 4px 16px rgba(102,126,234,.4);
    }
    .btn:active{
      transform:translateY(0);
    }
    .btn-secondary{
      background:#f1f5f9;
      color:var(--text);
      box-shadow:none;
    }
    .btn-secondary:hover{
      background:#e2e8f0;
    }
    .btn-download{
      background:var(--success);
      color:#fff;
      text-decoration:none;
      box-shadow:0 2px 8px rgba(16,185,129,.3);
    }
    .btn-download:hover{
      background:#059669;
      box-shadow:0 4px 16px rgba(16,185,129,.4);
    }
    
    /* í¼ ìš”ì†Œ */
    fieldset{
      border:2px solid var(--border);
      border-radius:12px;
      padding:20px;
      margin:20px 0 0;
      background:#fafbfc;
    }
    legend{
      padding:0 10px;
      color:var(--text);
      font-weight:800;
      font-size:16px;
    }
    input[type="text"]{
      width:100%;
      border:2px solid var(--border);
      color:var(--text);
      background:#fff;
      border-radius:10px;
      padding:12px 16px;
      outline:none;
      font-size:15px;
      transition:.2s;
    }
    input[type="text"]:focus{
      border-color:var(--accent);
      box-shadow:0 0 0 3px rgba(59,130,246,.1);
    }
    
    /* ì½”ë“œ ë¸”ë¡ */
    code{
      background:#f1f5f9;
      color:#1e293b;
      padding:4px 8px;
      border-radius:6px;
      border:1px solid var(--border);
      font-family:'Courier New',monospace;
      font-size:13px;
    }
    
    /* ë§ˆìŠ¤í‚¹ ì˜µì…˜ */
    .mask-actions{
      display:flex;
      gap:10px;
      margin:0 0 16px;
    }
    .mask-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
      gap:10px;
    }
    .mask-grid label{
      display:flex;
      gap:10px;
      align-items:center;
      user-select:none;
      background:#fff;
      border:2px solid var(--border);
      border-radius:10px;
      padding:12px 16px;
      cursor:pointer;
      transition:.2s;
    }
    .mask-grid label:hover{
      border-color:var(--accent);
      background:#f8fafc;
    }
    .mask-grid input[type="checkbox"]{
      width:18px;
      height:18px;
      cursor:pointer;
    }
    .mask-grid input[type="checkbox"]:checked + span{
      color:var(--accent);
      font-weight:700;
    }
    
    /* ë“œë¡­ì¡´ */
    .dropzone{
      border:3px dashed var(--border);
      border-radius:12px;
      min-height:180px;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      text-align:center;
      gap:10px;
      padding:30px;
      background:#fafbfc;
      color:var(--muted);
      cursor:pointer;
      transition:.2s;
    }
    .dropzone:hover{
      border-color:var(--accent);
      background:#f8fafc;
    }
    .dropzone strong{
      color:var(--text);
      font-size:16px;
    }
    .file-meta{
      font-size:14px;
      color:var(--accent);
      font-weight:700;
      margin-top:8px;
    }
    
    /* í”„ë¦¬ë·° */
    .preview{
      white-space:pre-wrap;
      background:#1e293b;
      border:1px solid var(--border);
      color:#e2e8f0;
      padding:16px;
      border-radius:10px;
      margin-top:16px;
      max-height:320px;
      overflow:auto;
      font-family:'Courier New',monospace;
      font-size:13px;
    }
    
    /* ì—ëŸ¬ ë©”ì‹œì§€ */
    .err{
      color:var(--danger);
      background:#fee2e2;
      padding:12px 16px;
      border-radius:8px;
      border:1px solid #fecaca;
      font-weight:600;
    }
    
    /* ê²°ê³¼ ë°•ìŠ¤ ìŠ¤íƒ€ì¼ ê°œì„  */
    #encrypt-result, #decrypt-result{
      background:#f8fafc;
      padding:20px;
      border-radius:10px;
      border:1px solid var(--border);
    }
    #encrypt-result p, #decrypt-result p{
      margin:8px 0;
      line-height:1.6;
    }
    
    /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
    @keyframes pulse{
      0%, 100%{opacity:1}
      50%{opacity:.5}
    }
    .muted.loading{
      animation:pulse 1.5s ease-in-out infinite;
      color:var(--accent);
      font-weight:700;
    }
  </style>
</head>

<body>
  <nav>
    <div class="left">ğŸ” Lockument</div>
    <div class="right" id="nav-right">
      <!-- JSì—ì„œ ë¡œê·¸ì¸ ìƒíƒœì— ë”°ë¼ ë²„íŠ¼ í‘œì‹œ -->
    </div>
  </nav>

  <div class="wrap">
    <h1 class="headline">íŒŒì¼ ì•”í˜¸í™” / ë³µí˜¸í™”</h1>
    <p class="sub">ğŸš€ Drag & Drop ì—…ë¡œë“œ Â· ğŸ¯ ì„ íƒì  ë§ˆìŠ¤í‚¹ Â· ğŸ”‘ í† í° ê¸°ë°˜ ë³µí˜¸í™”</p>

    <div class="tabs">
      <button class="tab-btn active" onclick="showTab('encrypt')">ğŸ”’ ì•”í˜¸í™”</button>
      <button class="tab-btn" onclick="showTab('decrypt')">ğŸ”“ ë³µí˜¸í™”</button>
    </div>

    <div class="grid">
      <div class="card" id="encrypt" style="display:block;">
        <h3 class="section-title">ğŸ“¤ íŒŒì¼ ì—…ë¡œë“œ</h3>
        <div id="dropzone" class="dropzone">
          <div><strong>ì—¬ê¸°ë¡œ ë“œë˜ê·¸</strong>í•˜ê±°ë‚˜ í´ë¦­í•´ì„œ íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”</div>
          <small>PDF, DOCX, XLSX, TXT ë“± ëª¨ë“  íŒŒì¼ ì§€ì›</small>
          <div id="file-meta" class="file-meta"></div>
        </div>
        <input id="file-input" type="file" style="display:none" />

        <fieldset>
          <legend>ğŸ¯ ë§ˆìŠ¤í‚¹í•  í•­ëª© ì„ íƒ</legend>
          <div class="mask-actions">
            <button type="button" id="select-all" class="btn btn-secondary">ì „ì²´ ì„ íƒ</button>
            <button type="button" id="clear-all" class="btn btn-secondary">ì „ì²´ í•´ì œ</button>
          </div>
          <div id="mask-grid" class="mask-grid"></div>
          <p class="muted" style="margin-top:12px;">
            âš ï¸ <strong>ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸, ì—¬ê¶Œë²ˆí˜¸, ìš´ì „ë©´í—ˆ, ì™¸êµ­ì¸ë“±ë¡ë²ˆí˜¸, ì¸ì¦ì •ë³´(auth)</strong>ëŠ” í•­ìƒ ìë™ìœ¼ë¡œ ë§ˆìŠ¤í‚¹ë©ë‹ˆë‹¤.
          </p>
        </fieldset>

        <div style="margin-top:20px;">
          <button id="btn-encrypt" class="btn">ğŸ”’ ì—…ë¡œë“œ & ì•”í˜¸í™”</button>
          <span id="enc-status" class="muted"></span>
        </div>
        <div id="encrypt-result" style="margin-top:20px;display:none;"></div>
        <div id="masked-preview" class="preview" style="display:none;"></div>
        <div id="enc-error" class="err" style="margin-top:12px;display:none;"></div>
      </div>

      <div class="card" id="decrypt" style="display:none;">
        <h3 class="section-title">ğŸ”‘ í† í° ì…ë ¥</h3>
        <input type="text" id="dec-token" placeholder="ì•”í˜¸í™” ì‹œ ë°›ì€ í† í°ì„ ì…ë ¥í•˜ì„¸ìš”" />
        <div style="margin-top:16px;">
          <button id="btn-decrypt" class="btn">ğŸ”“ ë³µí˜¸í™” & ë‹¤ìš´ë¡œë“œ</button>
          <span id="dec-status" class="muted"></span>
        </div>
        <div id="decrypt-result" style="margin-top:20px;display:none;"></div>
        <div id="dec-error" class="err" style="margin-top:12px;display:none;"></div>
      </div>
    </div>
  </div>

  <script>
    // âœ… ì„¸ì…˜ ì €ì¥ì†Œ ê¸°ë°˜
    const getToken = () => sessionStorage.getItem("access_token") || sessionStorage.getItem("token");
    const getExpiry = () => parseInt(sessionStorage.getItem("token_expiry") || "0");
    const getRole = () => sessionStorage.getItem("user_role") || sessionStorage.getItem("role");

    function startSessionTimer(expiry){
      const timerEl = document.getElementById("session-timer");
      if(!timerEl) return;
      function tick(){
        const now = Math.floor(Date.now()/1000);
        const remain = expiry - now;
        if(remain <= 0){
          sessionStorage.clear();
          alert("ì„¸ì…˜ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.");
          location.replace("/login");
          return;
        }
        const m = String(Math.floor(remain/60)).padStart(2,"0");
        const s = String(remain%60).padStart(2,"0");
        timerEl.textContent = `â±ï¸ ${m}:${s}`;
        setTimeout(tick,1000);
      }
      tick();
    }

    async function paintNav(){
      const navRight = document.getElementById("nav-right");
      const token = getToken();
      const role = getRole();

      if(!token){
        navRight.innerHTML = `
          <a href="/login">ë¡œê·¸ì¸</a>
          <a href="/register">íšŒì›ê°€ì…</a>
        `;
        return;
      }

      try{
        const r = await fetch("/api/me",{headers:{Authorization:"Bearer "+token}});
        if(!r.ok){ 
          if(r.status===401){
            sessionStorage.clear();
            navRight.innerHTML = `<a href="/login">ë¡œê·¸ì¸</a><a href="/register">íšŒì›ê°€ì…</a>`;
          }
          return;
        }
        const j = await r.json();

        if(j.ok){
          const logBtn = role === "admin"
            ? `<a href="/recent/view" class="btn-log">ğŸ“Š ë¡œê·¸ ê¸°ë¡</a>`
            : "";
          navRight.innerHTML = `
            ${logBtn}
            <span id="session-timer"></span>
            <span style="color:var(--text);font-weight:700;">ğŸ‘¤ ${j.user.username || j.user.email}ë‹˜</span>
            <button id="btnLogout">ë¡œê·¸ì•„ì›ƒ</button>
          `;
          document.getElementById("btnLogout").onclick = ()=>{
            sessionStorage.clear();
            location.replace("/login");
          };
          const exp = getExpiry();
          if(exp){ startSessionTimer(exp); }
        }
      }catch(err){
        console.error("Nav paint error:", err);
      }
    }

    window.addEventListener("pageshow",(e)=>{ if(e.persisted){ paintNav(); }});

    function showTab(id){
      document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
      document.querySelectorAll('.card').forEach(c=>c.style.display='none');
      document.getElementById(id).style.display='block';
      if(id==='encrypt'){
        document.querySelector('.tabs .tab-btn:first-child').classList.add('active');
      }else{
        document.querySelector('.tabs .tab-btn:last-child').classList.add('active');
      }
    }

    const LABELS={
      phone:"ğŸ“± ì „í™”ë²ˆí˜¸",
      email:"ğŸ“§ ì´ë©”ì¼",
      card_or_acct:"ğŸ’³ ì¹´ë“œ/ê³„ì¢Œ",
      auth:"ğŸ” ì¸ì¦ì •ë³´",
      address:"ğŸ“ ì£¼ì†Œ"
    };

    function renderMaskCheckboxes(){
      const grid=document.getElementById("mask-grid"); 
      grid.innerHTML="";
      Object.keys(LABELS).forEach(t=>{
        const el=document.createElement("label");
        el.innerHTML=`<input type="checkbox" name="mask_types" value="${t}"><span>${LABELS[t]}</span>`;
        grid.appendChild(el);
      });
      document.getElementById("select-all").onclick=()=>grid.querySelectorAll('input').forEach(cb=>cb.checked=true);
      document.getElementById("clear-all").onclick=()=>grid.querySelectorAll('input').forEach(cb=>cb.checked=false);
    }

    // ë“œë˜ê·¸ì•¤ë“œë¡­
    const dropzone=document.getElementById("dropzone"),
          fileInput=document.getElementById("file-input"),
          fileMeta=document.getElementById("file-meta");
    
    dropzone.addEventListener("click",()=>fileInput.click());
    fileInput.addEventListener("change",()=>{
      const f=fileInput.files?.[0]; 
      if(f){
        fileMeta.textContent=`âœ… ${f.name} (${Math.round(f.size/1024)} KB)`;
      }
    });
    ["dragenter","dragover","dragleave","drop"].forEach(evt=>
      dropzone.addEventListener(evt,e=>{e.preventDefault();e.stopPropagation();})
    );
    dropzone.addEventListener("drop",(e)=>{
      const f=e.dataTransfer.files?.[0]; 
      if(f){
        fileInput.files=e.dataTransfer.files; 
        fileMeta.textContent=`âœ… ${f.name} (${Math.round(f.size/1024)} KB)`;
      }
    });

    // ì•”í˜¸í™”
    document.getElementById("btn-encrypt").addEventListener("click",async()=>{
      const encStatus=document.getElementById("enc-status"),
            encBox=document.getElementById("encrypt-result"),
            encErr=document.getElementById("enc-error"),
            encPreview=document.getElementById("masked-preview");

      encErr.textContent=""; 
      encErr.style.display="none";
      encBox.style.display="none";
      encStatus.textContent="â³ ì—…ë¡œë“œ/ì•”í˜¸í™” ì¤‘...";
      encStatus.classList.add("loading");
      
      const file=fileInput.files?.[0]; 
      if(!file){
        alert("íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”"); 
        encStatus.textContent=""; 
        encStatus.classList.remove("loading");
        return;
      }

      try{
        const formData=new FormData(); 
        formData.append("file",file);
        const selected=[...document.querySelectorAll('input[name="mask_types"]:checked')].map(x=>x.value);
        if(selected.length>0){formData.append("mask_types",selected.join(","));}
        const token=getToken(); 
        if(!token){
          alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
          location.href="/login"; 
          return;
        }

        const res=await fetch("/api/encrypt",{
          method:"POST",
          body:formData,
          headers:{Authorization:"Bearer "+token}
        });
        
        if(res.status===401){
          sessionStorage.clear();
          alert("ì„¸ì…˜ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.");
          location.href="/login";
          return;
        }
        
        const data=await res.json();

        if(data.ok){
          const downloadBtn=data.masked_file_url
            ? `<a class="btn btn-download" href="${data.masked_file_url}" target="_blank">ğŸ“¥ ë§ˆìŠ¤í‚¹ëœ íŒŒì¼ ë‹¤ìš´ë¡œë“œ</a>`
            : `<span class="muted">âš ï¸ masked_file_url ì—†ìŒ (ë°±ì—”ë“œ í™•ì¸ í•„ìš”)</span>`;
          
          encBox.innerHTML=`
            <p><strong>ğŸ”‘ í† í°:</strong> <code>${data.token}</code></p>
            <p><strong>ğŸ¯ ì ìš©ëœ ë§ˆìŠ¤í‚¹ ê·œì¹™:</strong> <code>${(data.effective_mask_types||[]).join(", ") || "ì—†ìŒ"}</code></p>
            <p><strong>ğŸ“Š ë¯¼ê°ì •ë³´ íƒì§€ í†µê³„:</strong> <code>${JSON.stringify(data.pii_stats||{},null,2)}</code></p>
            <div style="margin-top:16px;">${downloadBtn}</div>
          `;
          encBox.style.display="block";
          
          if(data.masked_preview){
            encPreview.style.display="block";
            encPreview.textContent=data.masked_preview;
          }else{
            encPreview.style.display="none";
            encPreview.textContent="";
          }
          
          encStatus.textContent="âœ… ì™„ë£Œ!";
          encStatus.classList.remove("loading");
        }else{
          encErr.textContent="âŒ ì—ëŸ¬: "+(data.message || data.error||"unknown");
          encErr.style.display="block";
          encStatus.textContent="";
          encStatus.classList.remove("loading");
        }
      }catch(e){
        encErr.textContent="âŒ ì—ëŸ¬: "+(e?.message||e);
        encErr.style.display="block";
        encStatus.textContent="";
        encStatus.classList.remove("loading");
      }
    });

    // ë³µí˜¸í™”
    document.getElementById("btn-decrypt").addEventListener("click",async()=>{
      const decStatus=document.getElementById("dec-status"),
            decErr=document.getElementById("dec-error"),
            decResult=document.getElementById("decrypt-result");

      decErr.textContent=""; 
      decErr.style.display="none";
      decResult.style.display="none";
      decStatus.textContent="â³ ë³µí˜¸í™” ì¤‘...";
      decStatus.classList.add("loading");
      
      const tokenStr=document.getElementById("dec-token").value.trim(); 
      if(!tokenStr){
        alert("í† í°ì„ ì…ë ¥í•˜ì„¸ìš”"); 
        decStatus.textContent=""; 
        decStatus.classList.remove("loading");
        return;
      }
      
      const token=getToken(); 
      if(!token){
        alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
        location.href="/login"; 
        return;
      }

      try{
        const res=await fetch("/api/decrypt",{
          method:"POST",
          headers:{
            Authorization:"Bearer "+token,
            "Content-Type":"application/json"
          },
          body:JSON.stringify({token:tokenStr})
        });
        
        if(!res.ok){
          const err=await res.json().catch(()=>({}));
          decErr.textContent="âŒ ì—ëŸ¬: "+(err.message || err.error||res.statusText);
          decErr.style.display="block";
          decStatus.textContent="";
          decStatus.classList.remove("loading");
          return;
        }
        
        const blob=await res.blob();
        const url=URL.createObjectURL(blob);
        const contentDisp=res.headers.get("Content-Disposition")||"";
        let fn="decrypted_file";
        const match=contentDisp.match(/filename\*=UTF-8''(.+)|filename="?([^"]+)"?/);
        if(match) fn=decodeURIComponent(match[1]||match[2]);
        
        decResult.innerHTML=`
          <p style="margin-bottom:16px;"><strong>âœ… ë³µí˜¸í™” ì„±ê³µ!</strong></p>
          <a class="btn btn-download" href="${url}" download="${fn}">ğŸ“¥ ì›ë³¸ íŒŒì¼ ë‹¤ìš´ë¡œë“œ</a>
        `;
        decResult.style.display="block";
        decStatus.textContent="âœ… ì™„ë£Œ!";
        decStatus.classList.remove("loading");
      }catch(e){
        decErr.textContent="âŒ ì—ëŸ¬: "+(e?.message||e);
        decErr.style.display="block";
        decStatus.textContent="";
        decStatus.classList.remove("loading");
      }
    });

    (async()=>{
      await paintNav(); 
      renderMaskCheckboxes();
    })();
  </script>
</body>
</html>
